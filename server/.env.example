# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
PORT=4000
DB_PATH=./db.sqlite

# File Upload Directory (local fallback)
FILE_UPLOAD_DIR=./uploads

# =============================================================================
# AWS S3 STORAGE
# =============================================================================
# Required for storing originals, masks, backgrounds, composites
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your_aws_access_key_id
AWS_SECRET_ACCESS_KEY=your_aws_secret_access_key
S3_BUCKET=product-photos-ai
S3_PUBLIC_BASE=https://product-photos-ai.s3.us-east-1.amazonaws.com

# Presigned URL expiry time in seconds (default: 3600 = 1 hour)
S3_PRESIGNED_URL_EXPIRY=3600

# =============================================================================
# AI PROVIDERS (Replicate)
# =============================================================================
# Replicate API Token (get from https://replicate.com/account/api-tokens)
REPLICATE_API_TOKEN=r8_your_replicate_api_token_here

# Segmentation Model (removes background, returns mask)
# Options: cjwbw/rembg, lucataco/remove-bg, pollinations/modnet
AI_SEGMENT_MODEL=cjwbw/rembg:fb8af171cfa1616ddcf1242c093f9c46bcada5ad4cf6f2fbe8b81b330ec5c003

# Background Generation Model (themed backgrounds)
# Options: stability-ai/sdxl, black-forest-labs/flux-schnell
AI_BG_MODEL=stability-ai/sdxl:39ed52f2a78e934b3ba6e2a89f5b1c712de7dfea535525255b1aa35c5565e08b

# AI Cost Tracking (optional soft limits, warnings only)
AI_DAILY_SOFT_LIMIT_USD=50
AI_MAX_BG_VARIANTS=2

# =============================================================================
# 3JMS INTEGRATION
# =============================================================================
# 3JMS API Base URL
TJMS_API_BASE_URL=https://3jms.vistawinespirits.com

# 3JMS API Token (from Settings > API in 3JMS dashboard)
TJMS_API_TOKEN=your_3jms_api_token_here

# 3JMS Webhook Secret (for HMAC signature verification)
# Generate a random secret: openssl rand -hex 32
TJMS_WEBHOOK_SECRET=your_webhook_secret_shared_with_3jms

# 3JMS Polling Fallback (if webhooks not available)
# Poll interval in minutes (default: 5)
TJMS_POLL_INTERVAL_MIN=5

# =============================================================================
# SHOPIFY INTEGRATION
# =============================================================================
# Shopify Store Domain (without https://)
SHOPIFY_STORE_DOMAIN=yourstore.myshopify.com

# Shopify Admin API Access Token (create in Settings > Apps > Develop apps)
# Required scopes: write_products, read_products, write_files
SHOPIFY_ADMIN_TOKEN=shpat_your_shopify_admin_token_here

# Shopify API Version (recommended: use latest stable)
SHOPIFY_API_VERSION=2024-01

# Image attachment strategy: 'product' or 'variant'
SHOPIFY_ATTACH_TO=product

# =============================================================================
# N8N ORCHESTRATION (Optional)
# =============================================================================
# n8n Webhook Base URL (if using n8n for workflow orchestration)
N8N_WEBHOOK_BASE_URL=http://localhost:5678

# n8n API Key (for triggering workflows)
N8N_API_KEY=your_n8n_api_key

# n8n Signing Secret (for verifying n8n webhook callbacks)
N8N_SIGNING_SECRET=your_n8n_signing_secret

# =============================================================================
# THEMING & CONTENT
# =============================================================================
# Comma-separated list of available themes
THEMES=default,halloween,christmas,valentines

# Default theme for new jobs
DEFAULT_THEME=default

# =============================================================================
# JOB PROCESSING
# =============================================================================
# Max images per SKU (default: 4)
IMAGE_MAX_PER_SKU=4

# Job timeout in minutes (default: 10)
JOB_TIMEOUT_MIN=10

# Max retry attempts for failed jobs (default: 3)
JOB_MAX_RETRIES=3

# Job cleanup: delete jobs older than N days (default: 30)
JOB_CLEANUP_DAYS=30

# =============================================================================
# OBSERVABILITY
# =============================================================================
# Slack Webhook URL for alerts (optional)
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK

# Alert on job failures
ALERT_ON_FAILURE=true

# Alert on jobs taking longer than N minutes
ALERT_ON_SLOW_JOB_MIN=15

# Log level: debug, info, warn, error
LOG_LEVEL=info
